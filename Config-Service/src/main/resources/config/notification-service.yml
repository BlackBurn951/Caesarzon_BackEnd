server:
  port: 0

eureka:
  #  instance:                  #NELLA CONFIGURAZIONE N2 DEL CORS QUESTI VANNO OMESSI
  #    prefer-ip-address: true  #DICE AD EUREKA CHE PER ESSERE CONTATTATO (DA ALTRI SERVIZI) DI PREFERIRE IL SUO IP PIÃ¹ TOSTO CHE IL SUO NOME [IN AMBIENTE DOCKER DOVREBBE ESSERE DI PREGIO]
  client:
    serviceUrl:
      defaultZone: http://localhost:8067/eureka/

spring:
  output:
    ansi:
      enabled: always

  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://25.24.244.170:8080/realms/CaesarRealm
          jwk-set-uri: ${spring.security.oauth2.resourceserver.jwt.issuer-uri}/protocol/openid-connect/certs


management:
  endpoint:
    health:
      show-details: "ALWAYS"
  health:
    circuitbreakers:
      enabled: true

resilience4j.circuitbreaker:
  configs:
    default:
      sliding-window-size: 4
      permitted-number-of-calls-in-half-open-state: 10
      wait-duration-in-open-state: 10000
      failure-rate-threshold: 50
      event-consumer-buffer-size: 10
      register-health-indicator: true
      record-exceptions:
        - java.io.IOException
        - java.util.concurrent.TimeoutException
        - org.springframework.web.client.HttpServerErrorException
        - org.springframework.web.client.ResourceAccessException
        - io.netty.handler.timeout.ReadTimeoutException


  instances:
    adminNotificationService:
      base-config: default
    banService:
      base-config: default
    reportService:
      base-config: default
    supportRequestService:
      base-config: default
    userNotificationService:
      base-config: default
    generalService:
      base-config: default

resilience4j.retry:
  configs:
    default:
      enableExponentialBackoff: true
      exponentialBackoffMultiplier: 2
      ignore-exceptions:

  instances:
    adminNotificationService:
      base-config: default
      maxAttempts: 3
      waitDuration: 2000
    banService:
      base-config: default
      maxAttempts: 2
      waitDuration: 5000
    reportService:
      base-config: default
      maxAttempts: 3
      waitDuration: 4000
    supportRequestService:
      base-config: default
      maxAttempts: 3
      waitDuration: 4000
    userNotificationService:
      base-config: default
      maxAttempts: 4
      waitDuration: 3000
    generalService:
      base-config: default
      maxAttempts: 3
      waitDuration: 5000
